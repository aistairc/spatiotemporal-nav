# Spatiotemporal Navigation based on Pedestrian Trajectory Prediction in Dense Crowds

This repository can simulate robots navigation in dense crowds of pedestrian. 
You can compare Spatiotemporal navigation with 2D navigation.

Spatiotemporal navigation is planning method over multiple-time prediction maps with the future in mind.

This method ensures smooth moving by considering future pedestrian position.



## **demo video:**



https://user-images.githubusercontent.com/120366557/211997803-a0c3b54d-4157-4a67-bd10-0d9f821c3899.mp4



## **Dataset**

- Data
  - 2D map of the environment with many pedestrians and predicted map
  - Pedestrian motion is generated by ORCA
  - Predicted maps are generated by the proposed method

In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall any Contributor be liable to You for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising as a result of this License or out of the use or inability to use the Work (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if such Contributor has been advised of the possibility of such damages.

## **Using the code:**

You can output png files for creating a demo video by running the following command.

```bash
python3 two_maze.py -i [Path of input image/origin] -o [Path of output directory for simulation images] --st_r [y of a start] --st_c [x of a start] --go_r [y of a goal] --go_c [x of a goal]
python3 two_maze.py -i origin_pred_map/000/origin/ -o output_dir --st_r 270 --st_c 160 --go_r 130 --go_c 240
```

```bash
python3 spatiotemporal.py -i [Path of input image] -o [Path of output directory for simulation images] --st_r [y of a start] --st_c [x of a start] --go_r [y of a goal] --go_c [x of a goal]
python3 spatiotemporal.py -i origin_pred_map/000/ -o output_dir --st_r 270 --st_c 160 --go_r 130 --go_c 240
```
- Program
  - 2D navigation
  - Spatiotemporal navigation

## **LICENSE:**
Copyright 2023 National Institute of Advanced Industrial Science and Technology (AIST), Japan.

This program is licensed under the Apache License, Version2.0.

This program uses code derived from davecom/ClasicComputerScienceProblemsInPython((c) 2018 David Kopec).

The three contributions are as follows
- Enabled input from costmaps
- Implementation of spatiotemporal search
- Addition of robot simulation



[davecom/ClassicComputerScienceProblemsInPython](https://github.com/davecom/ClassicComputerScienceProblemsInPython)

